@mixin butterflyFluttering($butterflyWingHeight: 100px, $selector: "#butterfly") {
#{$selector} {
  
  $flowerWidth: $butterflyWingHeight * 6;
  
  @include transform(rotateZ(20deg) rotate3d(0, 1, 0, 0deg) scale3d(0.5, 0.5, 0.5));
  @include transform-origin(51% 50%);
  @include transform-style(preserve-3d);
  @include backgroundSvg("blue_flower_wo.svg", $flowerWidth);

  position: absolute;
  top: -100px;
  right: 210px;
  z-index: 1002;

.wing {
  
  &:before, &:after {//stuf
    content: '';
    position: absolute;
    border-radius: 50%;


background: -moz-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0) 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(0,0,0,0.65)), color-stop(100%,rgba(0,0,0,0))); /* Chrome,Safari4+ */
background: -webkit-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%); /* Opera 12+ */
background: -ms-radial-gradient(center, ellipse cover, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%); /* IE10+ */
background: radial-gradient(ellipse at center, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000', endColorstr='#00000000',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */

    box-shadow: 0 0 $butterflyWingHeight/2 rgba(0,0,0,0.25);
  }
  &:before {
    top: $butterflyWingHeight * .6;
    left: $butterflyWingHeight * 3.7;
    width: $butterflyWingHeight * 1.5;
    height: $butterflyWingHeight * 1.4;
  }

  position: absolute;
  @include transform(rotateX(30deg)  translate3d(-(2*$butterflyWingHeight), 0px, 0px) rotate3d(0, 1, 0, 160deg));
  transform-origin: top right;
  -webkit-transform-origin: top right;
  left: $butterflyWingHeight;
  top: 50%;
  margin-top: -$butterflyWingHeight;
  
  @include backgroundSvg("04_butterfly.svg", $butterflyWingHeight * 4);
  background-position: $butterflyWingHeight * 2 0;

  @include animation(rightwingani 6s ease-out infinite);
  
  &.left{
    @include transform(rotateX(30deg) rotate3d(0, 1, 0, 0deg));
    @include animation(leftwingani 6s ease-out infinite);
    left: -$butterflyWingHeight;
  }
}
} // end of selector
@include keyframes(rightwingani) {
	from {
    @include transform(rotateX(30deg) translate3d(-(2*$butterflyWingHeight), 0px, 0px) rotate3d(0, 1, 0, 160deg));
	}
	50% {
    @include transform(rotateX(30deg) translate3d(-(2*$butterflyWingHeight), 0px, 0px) rotate3d(0, 1, 0, 100deg));
	}
	to{
    @include transform(rotateX(30deg) translate3d(-(2*$butterflyWingHeight), 0px, 0px) rotate3d(0, 1, 0, 160deg));
	}
}

@include keyframes(leftwingani) {
	from {
    @include transform(rotateX(30deg) rotate3d(0, 1, 0, 0deg));
	}
	50% {
    @include transform(rotateX(30deg) rotate3d(0, 1, 0, 80deg));
	}
	to{
    @include transform(rotateX(30deg) rotate3d(0, 1, 0, 00deg));
	}
}

}


@include butterflyFluttering(50px);




// $butterfly:#ecf0f1;
// 
// .butterfly {
//   position: absolute;
//   @include transform(rotate(30deg));
//   top: 0;
//   right: 290px;
//   z-index: 1002;
//   @include backgroundSvg("blue_flower_wo.svg", 140px);
//   div {
// 	&:before, &:after {
// 		content: '';
// 		position: absolute;
// 		left: 100%;
// 		background-color: rgba($black, .25);
// 		box-shadow: 0 0 15px $black;
// 		border-radius: 50%;
// 	}
// 	&:before {
// 		width: 25px;
// 		height: 7px;
// 		bottom: 70%;
// 	}
// 	&:after {
// 		width: 25px;
// 		height: 10px;
// 		bottom: 50%;
// 	}
//   }
// 
//   .wing1, .wing2 {
//     position:absolute;
//     left:-32px;
//     top:32px;
//     width:50px;
//     height:100px;
//     z-index:20;
// 	 @include backgroundSvg("04_butterfly.svg", 100px);
// 	 background-position: 50px 0;
//   }
// 
//   .wing1 {
// 	 @include transform(rotateY(60deg));
// 	 @include animation(butterflywing 5s infinite linear);
// 	 @include transform-origin(100%);
//   }
//   .wing2 {
// 	 @include transform(rotateY(120deg));
// 	 @include animation(butterflywing2 5s infinite linear);
// 	 @include transform-origin(100%);
//     opacity:0.9;
//   }
// }
// 
// @include keyframes(butterflywing) {
//   0% {
//     @include transform(rotateY(110deg));
//   }
//   50%, 40%, 90% {
//     @include transform(rotateY(160deg));      
//   }
//   100% {
//     @include transform(rotateY(110deg));
//   }
// }
// 
// @include keyframes(butterflywing2) {
//   0% {
//     @include transform(rotateY(70deg));
//   }
//   50%, 40%, 90% {
//     @include transform(rotateY(40deg));      
//   }
//   100% {
//     @include transform(rotateY(70deg));
//   }
// }
